- name: test-no-reference
  tags:
    - sanity
  command: >
    snakemake -n -r -p -s Snakefile --configfile
    tests/data/config/invalid_config_no_ref.json
  exit_code: 1
  stdout:
    contains:
      - 'Invalid --configfile: ''reference'' is a required property'

- name: test-reference-does-not-exist
  tags:
    - sanity
  command: >
    snakemake -n -r -p -s Snakefile --configfile
    tests/data/config/invalid_config_fake_ref.json
  exit_code: 1
  stdout:
    contains:
      - Missing input files for rule align
      - /this/file/is/not/there

- name: test-snakemake
  tags:
    - sanity
  command: |
    snakemake --version

- name: test-singluarity-version
  tags:
    - sanity
  command: |
    singularity --version
  stdout:
    contains:
      - singularity version 3

- name: test-baits-only
  tags:
    - sanity
  command: >
    snakemake -s Snakefile -n --configfile
    tests/data/config/invalid_config_baitsfile_only.json
  exit_code: 1
  stdout:
    contains:
      - 'Invalid --configfile: "baitsfile" specified without "targetsfile"'

- name: test-samples-overlapping-name
  tags:
    - sanity
  command: >
    snakemake -s Snakefile -n --configfile
    tests/data/config/invalid_config_two_samples.json
  exit_code: 1
  stdout:
    contains:
      - 'Invalid --configfile: sample names should not overlap ("micro1" is contained in "micro12")'
